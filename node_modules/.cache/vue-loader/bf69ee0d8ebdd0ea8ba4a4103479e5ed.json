{"remainingRequest":"C:\\Users\\hp\\Documents\\VueJS\\Colite-master\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\hp\\Documents\\VueJS\\Colite-master\\frontend\\src\\views\\Map.vue?vue&type=style&index=0&lang=css&","dependencies":[{"path":"C:\\Users\\hp\\Documents\\VueJS\\Colite-master\\frontend\\src\\views\\Map.vue","mtime":1606230229687},{"path":"C:\\Users\\hp\\Documents\\VueJS\\Colite-master\\frontend\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\hp\\Documents\\VueJS\\Colite-master\\frontend\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\Users\\hp\\Documents\\VueJS\\Colite-master\\frontend\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\Users\\hp\\Documents\\VueJS\\Colite-master\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\hp\\Documents\\VueJS\\Colite-master\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoubWFwIHsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjMmMzZTUwOwogIC8qIG1pbi1oZWlnaHQ6IDEwMCU7ICovCiAgLyogaGVpZ2h0OiAxMDAlOyAqLwogIGhlaWdodDogMTAwdmg7Cn0K"},{"version":3,"sources":["Map.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+LA;AACA;AACA;AACA;AACA;AACA","file":"Map.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div class=\"map\">\n    <h1>Welcome to the map of all active parts page!</h1>\n  \n    <div>\n    <gmap-map\n      ref=\"gmap\"\n      :center=\"{ lat: 36.778259, lng: -119.417931\n }\"\n      :zoom=\"10\"\n      style=\"width:100%;  height: 100vh;\"\n    >\n      \n      <gmap-marker\n        :key=\"index\"\n        v-for=\"(m, index) in markers\"\n        :position=\"m.position\"\n        @click=\"toggleInfoWindow(m,index)\">\n      </gmap-marker>\n\n      <gmap-info-window\n        :options=\"infoOptions\"\n        :position=\"infoWindowPos\"\n        :opened=\"infoWinOpen\"\n        @closeclick=\"infoWinOpen=false\"\n      >\n        <div v-html=\"infoContent\"></div>\n      </gmap-info-window>\n\n    </gmap-map>\n  </div>\n    \n    \n\n    \n  </div>\n  \n\n\n  \n</template>\n\n<script>\nimport axios from 'axios'\nimport XLSX from 'xlsx'\nimport transformSheets from './readXlx.js'\nimport {locations} from './data.js'\n\n\n\n\n \n\n  const dataObj = {\n    lat: 6.465422,\n    lng: 3.406448\n  };\n  export default {\n    name: \"GoogleMap\",\n    data() {\n      console.log('data')\n    \n      return {\n        content:'',\n        err: 'lOjhsh',\n        center: {lat: dataObj.lat, lng: dataObj.lng},\n        map: null,\n        infoContent: '',\n        infoWindowPos: {\n          lat: 0,\n          lng: 0\n        },\n        infoWinOpen: false,\n        currentMidx: null,\n        //optional: offset infowindow so it visually sits nicely on top of our marker\n        infoOptions: {\n          pixelOffset: {\n            width: 0,\n            height: -35\n          }\n        },\n        markers: ''\n      };\n    },\n    mounted() {\n     console.log(this.markers)\n     \n     this.$refs.gmap.$mapPromise.then((map) => {\n        const bounds = new google.maps.LatLngBounds()\n        for (let m of this.markers) {\n          console.log(m)\n          bounds.extend(m.position)\n        }\n        map.fitBounds(bounds);\n      });\n   \n\n    \n     \n\n    },\n\n\n\n  created() {\n    var url = \"./testmap.xlsx\" // Files placed in the public directory can be accessed directly\n\n       axios.get(url, {responseType:'arraybuffer'})\n    .then((res) => {\n    var data = new Uint8Array(res.data)\n    var wb = XLSX.read(data, {type:\"array\"})\n    var sheets = wb.SheetNames[0];\n     let worksheet = wb.Sheets[sheets];\n    this.markers = XLSX.utils.sheet_to_json(worksheet).map((transform) => {\n    return {\n      ...transform, position: {\n        lat: transform.Latitude,\n        lng: transform.Longitude\n      }\n    }\n      \n    })\n    console.log(this.markers)\n     this.$refs.gmap.$mapPromise.then((map) => {\n        const bounds = new google.maps.LatLngBounds()\n        for (let m of this.markers) {\n          console.log(m)\n          bounds.extend(m.position)\n        }\n        map.fitBounds(bounds);\n      });\n    }).catch( err =>{\n      this.err = err\n    })\n    \n   \n  },\n\n    \n\n\n   \n    methods: {\n      toggleInfoWindow: function (marker, idx) {\n        \n        this.infoWindowPos = marker.position\n        this.infoContent = this.getInfoWindowContent(marker);\n        \n\n        //check if its the same marker that was selected if yes toggle\n        if (this.currentMidx == idx) {\n          this.infoWinOpen = !this.infoWinOpen;\n        }\n        //if different marker set infowindow to open and reset current marker index\n        else {\n          this.infoWinOpen = true;\n          this.currentMidx = idx;\n        }\n      },\n\n      \n\n     \n      getInfoWindowContent: function (marker) {\n        return (`<div class=\"card\">\n  \n  <div class=\"card-content\">\n    \n    <div class=\"content pt-3\">\n      <p>Latitude : ${marker.position.lat} <p />\n     <p>Longitude: ${marker.position.lng} </p>\n      <p class=\"\">Rmp : ${marker.RPM}</p>\n      <p class=\"\">Date : ${marker.Date}</p>\n\n\n     \n      \n    </div>\n  </div>\n</div>`);\n      },\n    }\n  };\n\n\n</script>\n\n\n\n<style>\n\n.map {\n  background-color: #2c3e50;\n  /* min-height: 100%; */\n  /* height: 100%; */\n  height: 100vh;\n}\n</style>\n"]}]}